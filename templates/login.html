<!DOCTYPE html>
<html lang="es-es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de sesión</title>
    <link rel="stylesheet" href="../static/css/styles.css">
    <script src="../static/js/scripts.js"></script>
</head>
<body>
    <div>
        <h1>Inicia Sesión</h1>
        <form action="/login" method="POST" id="loginForm">
            <label for="username_or_email">Nombre de Usuario o Email:</label>
            <input type="text" id="username_or_email" name="username_or_email"
                required><br>
            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" required><br>

            <!-- Mensaje de error si hay -->
            {% if error %}
                <p style="color:red;">{{ error }}</p>
            {% endif %}

            <button type="submit">Iniciar Sesión</button>
        </form>
        <button type="button" onclick="emailPopUp()">¿Olvidaste tu contraseña?</button>
        <div class="emailPopUp">
            <form id="emailForm">
                <label for="email">Introduce el email de la cuenta:</label>
                <input id="email" autocomplete="email" required>
                {% if error %}
                    <p style="color:red;">{{ error }}</p>
                {% endif %}
                <button type="submit" onclick="sendEmail()">Enviar Código</button>
                <div id="change_password">
                    <label for="code">Introduce el código enviado al email:</label>
                    <input id="code" required>
                    <button type="button">Cambiar Contraseña</button>
                </div>
                <div id="change">
                    <label for="new_password">Contraseña Nueva:</label>
                    <input type="password" id="new_password" name="new_password" required><br>
                    <label for="new_password2">Confirme la nueva contraseña:</label>
                    <input type="password" id="new_password2" name="new_password2" required><br>
                    {% if error %}
                        <p style="color:red;">{{ error }}</p>
                    {% endif %}
                    <button>Cambiar contraseña</button>
                </div>
            </form>
        </div>
        <br><br>
        <p>¿No tienes cuenta?</p>
        <button type="button" onclick="redirect('/register')">Registrarse</button>
        <br><br><br>
        <a href="/">Pagina de inicio</a>
    </div>
</body>
</html>